---
const { activeItemID } = Astro.props;

const navItems = [
    { id: 'home', label: 'Home', href: '/' },
    { id: 'background', label: 'Background', href: '/background' },
    { id: 'research', label: 'Research', href: '/research' },
    { id: 'psychotherapy', label: 'Psychotherapy', href: '/psychotherapy' },
    { id: 'contact', label: 'Contact', href: '/contact' },
];
---

<header class="sticky top-0 z-50 bg-bg-warm/95 backdrop-blur-sm border-b border-border-warm">
    <nav class="max-w-5xl mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
            <!-- Logo/Name -->
            <a href="/" class="flex items-center gap-3 group">
                <img
                    src="/profile.webp"
                    alt="Aliona Tsypes"
                    class="w-10 h-10 rounded-full object-cover ring-2 ring-primary/20"
                />
                <span class="font-heading font-semibold text-lg text-text-primary group-hover:text-primary transition-colors hidden sm:block">
                    Aliona Tsypes, PhD
                </span>
            </a>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center gap-8">
                {navItems.map(item => (
                    <a
                        href={item.href}
                        class={`font-body text-sm font-medium transition-colors hover:text-primary ${
                            activeItemID === item.id ? 'text-primary' : 'text-text-secondary'
                        }`}
                    >
                        {item.label}
                    </a>
                ))}
            </div>

            <!-- Social Icons (Desktop) -->
            <div class="hidden md:flex items-center gap-4">
                <a
                    href="https://bsky.app/profile/atsypes.bsky.social"
                    target="_blank"
                    class="text-text-muted hover:text-primary transition-colors"
                    aria-label="Bluesky"
                    title="Bluesky"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"/>
                    </svg>
                </a>
                <a
                    href="https://www.linkedin.com/in/aliona-tsypes-1520525b/"
                    target="_blank"
                    class="text-text-muted hover:text-primary transition-colors"
                    aria-label="LinkedIn"
                    title="LinkedIn"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <circle cx="4.983" cy="5.009" r="2.188"></circle>
                        <path d="M9.237 8.855v12.139h3.769v-6.003c0-1.584.298-3.118 2.262-3.118 1.937 0 1.961 1.811 1.961 3.218v5.904H21v-6.657c0-3.27-.704-5.783-4.526-5.783-1.835 0-3.065 1.007-3.568 1.96h-.051v-1.66H9.237zm-6.142 0H6.87v12.139H3.095z"/>
                    </svg>
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <button
                id="mobile-menu-btn"
                class="md:hidden p-2 text-text-secondary hover:text-primary transition-colors"
                aria-label="Open menu"
            >
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
        </div>
    </nav>
</header>

<!-- Mobile Navigation Overlay -->
<div id="mobile-menu" class="fixed inset-0 z-[60] bg-bg-warm transform translate-x-full transition-transform duration-300 ease-in-out md:hidden">
    <div class="flex flex-col h-full">
        <!-- Close Button -->
        <div class="flex justify-end p-6">
            <button
                id="close-menu-btn"
                class="p-2 text-text-secondary hover:text-primary transition-colors"
                aria-label="Close menu"
            >
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <!-- Profile Section -->
        <div class="flex flex-col items-center px-6 pb-8">
            <img
                src="/profile.webp"
                alt="Aliona Tsypes"
                class="w-24 h-24 rounded-full object-cover ring-4 ring-primary/20 mb-4"
            />
            <span class="font-heading font-semibold text-xl text-text-primary">
                Aliona Tsypes, PhD
            </span>
            <span class="text-text-secondary text-sm mt-1">
                Assistant Professor
            </span>
        </div>

        <!-- Navigation Links -->
        <nav class="flex-grow px-6">
            <ul class="space-y-2">
                {navItems.map(item => (
                    <li>
                        <a
                            href={item.href}
                            class={`block py-4 px-4 text-lg font-medium rounded-lg transition-colors ${
                                activeItemID === item.id
                                    ? 'bg-primary/10 text-primary'
                                    : 'text-text-primary hover:bg-surface hover:text-primary'
                            }`}
                        >
                            {item.label}
                        </a>
                    </li>
                ))}
            </ul>
        </nav>

        <!-- Social Links -->
        <div class="px-6 pb-8">
            <div class="flex justify-center gap-6 pt-6 border-t border-border-warm">
                <a
                    href="https://bsky.app/profile/atsypes.bsky.social"
                    target="_blank"
                    class="w-12 h-12 rounded-full bg-surface border border-border-warm flex items-center justify-center text-text-muted hover:text-primary hover:border-primary transition-all"
                    aria-label="Bluesky"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"/>
                    </svg>
                </a>
                <a
                    href="https://www.linkedin.com/in/aliona-tsypes-1520525b/"
                    target="_blank"
                    class="w-12 h-12 rounded-full bg-surface border border-border-warm flex items-center justify-center text-text-muted hover:text-primary hover:border-primary transition-all"
                    aria-label="LinkedIn"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <circle cx="4.983" cy="5.009" r="2.188"></circle>
                        <path d="M9.237 8.855v12.139h3.769v-6.003c0-1.584.298-3.118 2.262-3.118 1.937 0 1.961 1.811 1.961 3.218v5.904H21v-6.657c0-3.27-.704-5.783-4.526-5.783-1.835 0-3.065 1.007-3.568 1.96h-.051v-1.66H9.237zm-6.142 0H6.87v12.139H3.095z"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    const menuBtn = document.getElementById('mobile-menu-btn');
    const closeBtn = document.getElementById('close-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');

    menuBtn?.addEventListener('click', () => {
        mobileMenu?.classList.remove('translate-x-full');
        document.body.classList.add('overflow-hidden');
    });

    closeBtn?.addEventListener('click', () => {
        mobileMenu?.classList.add('translate-x-full');
        document.body.classList.remove('overflow-hidden');
    });

    // Close menu when clicking a link
    mobileMenu?.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            mobileMenu?.classList.add('translate-x-full');
            document.body.classList.remove('overflow-hidden');
        });
    });
</script>
